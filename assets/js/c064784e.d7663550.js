"use strict";(self.webpackChunkve_ps=self.webpackChunkve_ps||[]).push([[6706],{4137:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>m});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},d=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,w=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return a?t.createElement(w,l(l({ref:n},d),{},{components:a})):t.createElement(w,l({ref:n},d))}));function m(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=a[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2383:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var t=a(7462),r=(a(7294),a(4137));const o={title:"VEP-33: Allowance Token Interface"},l=void 0,i={unversionedId:"standards/VEP/vep-33",id:"standards/VEP/vep-33",title:"VEP-33: Allowance Token Interface",description:"Abstract",source:"@site/docs/standards/VEP/vep-33.md",sourceDirName:"standards/VEP",slug:"/standards/VEP/vep-33",permalink:"/standards/VEP/vep-33",draft:!1,tags:[],version:"current",frontMatter:{title:"VEP-33: Allowance Token Interface"},sidebar:"standardSidebar",previous:{title:"VEP-2981: NFT Royalty",permalink:"/standards/VEP/vep-2981"},next:{title:"LICENSE",permalink:"/standards/LICENSE"}},s={},c=[{value:"Abstract",id:"abstract",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Specification",id:"specification",level:2},{value:"Token root contract",id:"token-root-contract",level:3},{value:"Token wallet contract",id:"token-wallet-contract",level:3},{value:"increaseAllowance",id:"increaseallowance",level:4},{value:"decreaseAllowance",id:"decreaseallowance",level:4},{value:"allowance",id:"allowance",level:4},{value:"transferFrom",id:"transferfrom",level:4},{value:"Callbacks",id:"callbacks",level:3},{value:"Incoming approval callback",id:"incoming-approval-callback",level:4},{value:"Extended interface",id:"extended-interface",level:3},{value:"disapprove",id:"disapprove",level:4},{value:"increaseAllowanceRenewable",id:"increaseallowancerenewable",level:4},{value:"decreaseAllowanceRenewable",id:"decreaseallowancerenewable",level:4},{value:"allowanceRenewable",id:"allowancerenewable",level:4},{value:"increaseAllowance, decreaseAllowance",id:"increaseallowance-decreaseallowance",level:4},{value:"Interface detection",id:"interface-detection",level:3},{value:"Allowance",id:"allowance-1",level:4},{value:"Renewable Allowance",id:"renewable-allowance",level:4},{value:"Rationale",id:"rationale",level:2},{value:"Auto-renewable allowance",id:"auto-renewable-allowance",level:3},{value:"increaseAllowance/decreaseAllowance",id:"increaseallowancedecreaseallowance",level:3},{value:"Backwards compatibility",id:"backwards-compatibility",level:2},{value:"Security considerations",id:"security-considerations",level:2},{value:"Copyright",id:"copyright",level:2},{value:"References",id:"references",level:2}],d={toc:c};function p(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-preamble"},"VEP: 33\nauthor: EverDues <contact@everdues.com>\nstatus: Review\ntype: Contract\ncreated: 16.05.2023\nrequires: TIP-3, TIP-3.1, TIP-3.2, TIP-6\n")),(0,r.kt)("h2",{id:"abstract"},"Abstract"),(0,r.kt)("p",null,"VEP-33 describes an Allowance Token Interface by which token owners can allow a spender contract to spend a certain amount of tokens on their behalf to add support of pull payments (e.g. subscriptions, regular payouts, instalments, costs averaging etc)."),(0,r.kt)("h2",{id:"motivation"},"Motivation"),(0,r.kt)("p",null,"The present cryptocurrency payment infrastructure primarily depends on push transactions. In such a system, the payer initiates the payment and sends ('pushes') the funds to the payee's wallet address. While this system has proven effective for cryptocurrencies up to now, it also poses several challenges that impede mainstream adoption and restrict the versatility of cryptocurrencies across various commercial contexts. This proposal aspires to introduce the Allowance Token Interface as a solution to these challenges."),(0,r.kt)("p",null,"Subscription-based business models have witnessed exponential growth across numerous industries, such as media streaming, Software as a Service (SaaS), gaming, and more. Users are usually charged on a regular basis - monthly, quarterly, or annually. The existing push payment systems in the crypto landscape make recurring payments a cumbersome and complex process. This is because a new transaction needs to be manually initiated every time a payment is due, significantly reducing the feasibility of subscription-based models."),(0,r.kt)("p",null,"Consider the experience of a user named Alice, who maintains several subscriptions for streaming services, software, and online magazines, all payable in cryptocurrency. With the current push system, Alice would need to remember each due date and manually process each payment. The inconvenience and potential for missed payments could deter Alice and others like her from using cryptocurrencies for these transactions."),(0,r.kt)("p",null,"By incorporating this interface into the token, TIP3 token issuers can significantly boost user adoption and expand the practical applications for tokens in real-world scenarios, such as:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Subscription Services"),(0,r.kt)("li",{parentName:"ul"},"Investments and Savings"),(0,r.kt)("li",{parentName:"ul"},"Rent"),(0,r.kt)("li",{parentName:"ul"},"Membership Fees"),(0,r.kt)("li",{parentName:"ul"},"Donations"),(0,r.kt)("li",{parentName:"ul"},"Online Learning and E-Courses")),(0,r.kt)("h2",{id:"specification"},"Specification"),(0,r.kt)("p",null,"The keywords \u201cMUST\u201d, \u201cMUST NOT\u201d, \u201cREQUIRED\u201d, \u201cSHALL\u201d, \u201cSHALL NOT\u201d, \u201cSHOULD\u201d, \u201cSHOULD NOT\u201d, \u201cRECOMMENDED\u201d, \u201cMAY\u201d, and \u201cOPTIONAL\u201d in this document are to be interpreted as described in ",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc2119"},"RFC 2119"),"."),(0,r.kt)("h3",{id:"token-root-contract"},(0,r.kt)("a",{parentName:"h3",href:"https://docs.venom.foundation/standards/TIP/TIP-3/1#token-root"},"Token root contract")),(0,r.kt)("p",null,"No changes REQUIRED in existing standard TIP-3.2."),(0,r.kt)("h3",{id:"token-wallet-contract"},(0,r.kt)("a",{parentName:"h3",href:"https://docs.venom.foundation/standards/TIP/TIP-3/1#token-wallet"},"Token wallet contract")),(0,r.kt)("h4",{id:"increaseallowance"},"increaseAllowance"),(0,r.kt)("p",null,"Allows the spender contract to withdraw from your wallet multiple times, up to the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),". If this function is called again for the same ",(0,r.kt)("inlineCode",{parentName:"p"},"spender")," it increases the current allowance with the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function increasing spender allowance\n/// @param spender spender address\n/// @param amount allowance amount\n/// @param remaningGasTo remaining gas address\n/// @param notify notify waller owner\n/// @param payload transaction payload\n\nfunction increaseAllowance(\n        address spender,\n        uint128 amount,         \n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n) external;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," Multi-allowance MUST be possible by executing increaseAllowance for each spender address."),(0,r.kt)("h4",{id:"decreaseallowance"},"decreaseAllowance"),(0,r.kt)("p",null,"Decreases the current allowance with the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),". If the current ",(0,r.kt)("inlineCode",{parentName:"p"},"spender")," allowance does not exist, do nothing. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function is decreasing spender allowance\n/// @param spender spender address\n/// @param amount allowance amount\n/// @param remaningGasTo remaining gas address\n/// @param notify notify wallet owner\n/// @param payload transaction payload\n\nfunction decreaseAllowance(\n        address spender,\n        uint128 amount,         \n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n) external;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"If the ",(0,r.kt)("inlineCode",{parentName:"li"},"amount")," is ",(0,r.kt)("inlineCode",{parentName:"li"},">=")," that existing allowance then deletes the current allowance.")),(0,r.kt)("h4",{id:"allowance"},"allowance"),(0,r.kt)("p",null,"Returns the amount which spender is still allowed to withdraw from the wallet."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function return current spender allowance\n/// @param spender spender address\n/// @return amount initial and maximum allowance granted to spender\n\nfunction allowance(address spender) external view returns (uint128 amount);\n")),(0,r.kt)("h4",{id:"transferfrom"},"transferFrom"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transferFrom")," method is used for a withdrawal workflow, allowing ",(0,r.kt)("inlineCode",{parentName:"p"},"spender")," contracts to transfer tokens on your behalf to a token wallet, owned by the ",(0,r.kt)("inlineCode",{parentName:"p"},"spender"),". Token wallet address is derived automatically."),(0,r.kt)("p",null,"The function MUST throw an error unless the message sender has permission to withdraw such an amount of tokens granted via the ",(0,r.kt)("inlineCode",{parentName:"p"},"approve")," function. The function MUST decrease the allowed number of tokens by the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," and call the ",(0,r.kt)("inlineCode",{parentName:"p"},"acceptTransfer")," function of the ",(0,r.kt)("inlineCode",{parentName:"p"},"recipientWallet")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," as an argument and decrease the token wallet balance by ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),". The function MUST throw an error, if the current ",(0,r.kt)("inlineCode",{parentName:"p"},"balance")," of tokens is less than the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),". "),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"deployWalletValue")," is greater than ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),", token wallet MUST deploy token wallet for recipient."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\n/// @notice This function is transfered tokens to a spender wallet\n/// @param amount tokens amount\n/// @param deployWalletValue value to deploy the recipient's wallet if needed\n/// @param notify notify wallet owner\n/// @param payload transaction payload\n\nfunction transferFrom(\n        uint128 amount,\n        uint128 deployWalletValue,\n        address remainingGasTo,\n        bool notify,\n        TvmCell payload\n) external;\n")),(0,r.kt)("h3",{id:"callbacks"},"Callbacks"),(0,r.kt)("h4",{id:"incoming-approval-callback"},"Incoming approval callback"),(0,r.kt)("p",null,"Notifies spender contract that an allowance was changed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function notify spender contract about allowance changes\n/// @param tokenRoot token root address\n/// @param recoveryRate recovery rate\n/// @param sender sender address\n/// @param remaningGasTo remaining gas address\n/// @param payload transaction payload\n\nfunction onAcceptTokensAllowance(\n          address tokenRoot,\n          uint128 amount,\n          uint128 recoveryRate,\n          address sender,\n          address remainingGasTo,\n          TvmCell payload\n) external;\n")),(0,r.kt)("h3",{id:"extended-interface"},"Extended interface"),(0,r.kt)("h4",{id:"disapprove"},"disapprove"),(0,r.kt)("p",null,"Cancel current spender allowance. Can be used as an alternative to ",(0,r.kt)("inlineCode",{parentName:"p"},"decreaseAllowance")," to cancel allowance without need to know the amount of the current allowance. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function cancel spender allowance\n/// @param spender spender address\n\nfunction disapprove(address spender) external;\n")),(0,r.kt)("h4",{id:"increaseallowancerenewable"},"increaseAllowanceRenewable"),(0,r.kt)("p",null,"An auto-renewable allowance enables many traditional financial concepts like credit and debit limits. A wallet owner can specify a spending limit, and limit the amount that can be charged from the wallet based on an allowance that recovers over time at a rate of recoveryRate up to a limit of amount. recoveryRate defines the amount of tokens per second that the allowance regains towards the initial maximum approval amount. If this function is called again for the same spender it increases the current allowance with the amount or current recovery rate according to the new recoveryRate."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\n/// @notice This function increasing spender allowance\n/// @param spender spender address\n/// @param amount tokens amount\n/// @param recoveryRate recovery rate\n/// @param remaningGasTo remaining gas address\n/// @param notify notify waller owner\n/// @param payload transaction payload\n\nfunction increaseAllowanceRenewable(\n        address spender,\n        uint128 amount,\n        uint128 recoveryRate,\n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n) external;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Renewable allowances can be implemented with discrete resets per time cycle. However, a continuous ",(0,r.kt)("inlineCode",{parentName:"li"},"recoveryRate")," allows for more flexible use cases not bound by reset cycles and can be implemented with simpler logic."),(0,r.kt)("li",{parentName:"ol"},"Current recovered allowance (from the last execution of ",(0,r.kt)("inlineCode",{parentName:"li"},"tranferFrom")," function) MUST be recalculated according new ",(0,r.kt)("inlineCode",{parentName:"li"},"amount")," and/or ",(0,r.kt)("inlineCode",{parentName:"li"},"recoveryRate"),".")),(0,r.kt)("h4",{id:"decreaseallowancerenewable"},"decreaseAllowanceRenewable"),(0,r.kt)("p",null,"Decreases the current allowance with the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," and/or current recovery rate with ",(0,r.kt)("inlineCode",{parentName:"p"},"recoveryRate"),". If the current ",(0,r.kt)("inlineCode",{parentName:"p"},"spender")," allowance does not exist, do nothing. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice This function is decreasing spender allowance\n/// @param spender spender address\n/// @param amount allowance amount\n/// @param recoveryRate recovery rate\n/// @param remaningGasTo remaining gas address\n/// @param notify notify wallet owner\n/// @param payload transaction payload\n\nfunction decreaseAllowanceRenewable(\n        address spender,\n        uint128 amount,\n        uint128 recoveryRate,\n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n) external;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"If the ",(0,r.kt)("inlineCode",{parentName:"li"},"amount")," is ",(0,r.kt)("inlineCode",{parentName:"li"},">="),"that existing allowance then deletes the current allowance."),(0,r.kt)("li",{parentName:"ol"},"Current recovered allowance (from the last execution of ",(0,r.kt)("inlineCode",{parentName:"li"},"tranferFrom")," function) MUST be recalculated according new ",(0,r.kt)("inlineCode",{parentName:"li"},"amount")," and/or ",(0,r.kt)("inlineCode",{parentName:"li"},"recoveryRate"),".")),(0,r.kt)("h4",{id:"allowancerenewable"},"allowanceRenewable"),(0,r.kt)("p",null,"Returns approved max amount and recovery rate of allowance granted to spender. The amount returned by allowance method MUST be as of ",(0,r.kt)("inlineCode",{parentName:"p"},"block.timestamp"),", if a renewable allowance for ",(0,r.kt)("inlineCode",{parentName:"p"},"spender")," is present."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/// @notice  Returns approved max amount and recovery rate of allowance granted to `spender` \n/// @param   spender allowed spender of token\n/// @return  amount initial and maximum allowance granted to spender\n/// @return  recoveryRate recovery amount per second\n\nfunction allowanceRenewable() external view returns (uint128 amount, uint128 recoveryRate);\n")),(0,r.kt)("h4",{id:"increaseallowance-decreaseallowance"},"increaseAllowance, decreaseAllowance"),(0,r.kt)("p",null,"Base methods ",(0,r.kt)("inlineCode",{parentName:"p"},"increaseAllowance")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"decreaseAllowance")," MUST set recoveryRate to ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),"."),(0,r.kt)("h3",{id:"interface-detection"},"Interface detection"),(0,r.kt)("h4",{id:"allowance-1"},"Allowance"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"interface IAllowanceTokenWallet {\n\n      /// @notice This function increasing `spender` allowance\n      /// @param spender spender address\n      /// @param amount tokens amount\n      /// @param remaningGasTo remaining gas address\n      /// @param notify notify waller owner\n      /// @param payload transaction payload\n      function increaseAllowance(\n        address spender,\n        uint128 amount,         \n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n\n      /// @notice This function is decreasing `spender` allowance\n      /// @param spender spender address\n      /// @param amount allowance amount\n      /// @param remaningGasTo remaining gas address\n      /// @param notify notify wallet owner\n      /// @param payload transaction payload\n      function decreaseAllowance(\n        address spender,\n        uint128 amount,         \n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n\n      /// @notice Returns amounts spendable by `spender`.\n      /// @param spender spender of token\n      /// @return remaining allowance at the current point in time\n      function allowance(address sender) external returns (uint128 amount);\n\n      /// @notice This function is transfered tokens to a spender wallet\n      /// @param amount tokens amount\n      /// @param deployWalletValue value to deploy the spender's wallet if needed\n      /// @param notify notify wallet owner\n      /// @param payload transaction payload\n      function transferFrom(\n        uint128 amount,\n        uint128 deployWalletValue,\n        address remainingGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n}\n")),(0,r.kt)("p",null,"The token wallet interface ID is ",(0,r.kt)("inlineCode",{parentName:"p"},"0x2FC61B07")),(0,r.kt)("h4",{id:"renewable-allowance"},"Renewable Allowance"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"interface IAllowanceRenewableTokenWallet {\n    \n      /// @notice This function increasing spender allowance\n      /// @param spender spender address\n      /// @param amount tokens amount\n      /// @param remaningGasTo remaining gas address\n      /// @param notify notify waller owner\n      /// @param payload transaction payload\n      function increaseAllowanceRenewable(\n        address spender,\n        uint128 amount,\n        uint128 recoveryRate,\n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n\n      /// @notice This function is decreasing spender allowance\n      /// @param spender spender address\n      /// @param amount allowance amount\n      /// @param recoveryRate recovery rate\n      /// @param remaningGasTo remaining gas address\n      /// @param notify notify wallet owner\n      /// @param payload transaction payload\n      function decreaseAllowanceRenewable(\n        address spender,\n        uint128 amount,\n        uint128 recoveryRate,\n        address remaningGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n\n      /// @notice  Returns approved max amount and recovery rate of allowance granted to `spender` \n      /// @param   spender allowed spender of token\n      /// @return  amount initial and maximum allowance granted to spender\n      /// @return  recoveryRate recovery amount per second\n      function allowanceRenewable(address sender) external returns (uint128 amount, uint128 recoveryRate);\n\n      /// @notice This function is transfered tokens to a spender wallet\n      /// @param amount tokens amount\n      /// @param deployWalletValue value to deploy the recipient's wallet if needed\n      /// @param notify notify wallet owner\n      /// @param payload transaction payload\n      function transferFrom(\n        uint128 amount,\n        uint128 deployWalletValue,\n        address remainingGasTo,\n        bool notify,\n        TvmCell payload\n      ) external;\n}\n")),(0,r.kt)("p",null,"The token wallet interface ID is ",(0,r.kt)("inlineCode",{parentName:"p"},"0x7EB81C0D")),(0,r.kt)("h2",{id:"rationale"},"Rationale"),(0,r.kt)("h3",{id:"auto-renewable-allowance"},"Auto-renewable allowance"),(0,r.kt)("p",null,"In the most EVM networks ERC-20 tokens support allowances, with which token owners can allow a spender to spend a certain amount of tokens on their behalf. However, this is not ideal in circumstances involving recurring payments (e.g. subscriptions, regular payouts, instalments, costs averaging etc).\nMany existing DApps in EVM networks circumvent this limitation by requesting that users grant a large or unlimited allowance. This presents a security risk as malicious DApps can drain users\u2019 accounts up to the allowance granted, and users may not be aware of the implications of granting allowances.\nAn auto-renewable allowance is used to mitigate such risks by providing possibility to limit the amount charged from the token wallet based on an allowance that recovers over time."),(0,r.kt)("h3",{id:"increaseallowancedecreaseallowance"},"increaseAllowance/decreaseAllowance"),(0,r.kt)("p",null,"In ERC-20 token standard allowance is implemented with help of ",(0,r.kt)("inlineCode",{parentName:"p"},"approve")," method but changing an allowance with this method brings the risk that someone may use both the old and the new allowance by unfortunate transaction ordering. To mitigate such risks we excluded this function from standard and proposed to use ",(0,r.kt)("inlineCode",{parentName:"p"},"increaseAllowance")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"decreaseAllowance")," instead. "),(0,r.kt)("h2",{id:"backwards-compatibility"},"Backwards compatibility"),(0,r.kt)("p",null,"This standard is compatible with ","[TIP-3.1]",", ","[TIP-3.2]"," standards."),(0,r.kt)("h2",{id:"security-considerations"},"Security considerations"),(0,r.kt)("p",null,"There are no security considerations related directly to the implementation of this standard."),(0,r.kt)("h2",{id:"copyright"},"Copyright"),(0,r.kt)("p",null,"Copyright and related rights waived via ",(0,r.kt)("a",{parentName:"p",href:"https://docs.venom.foundation/standards/LICENSE/"},"CC0"),"."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-20"},"https://eips.ethereum.org/EIPS/eip-20")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-5827"},"https://eips.ethereum.org/EIPS/eip-5827")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.openzeppelin.com/contracts/2.x/api/token/erc20#ERC20-increaseAllowance-address-uint256-"},"https://docs.openzeppelin.com/contracts/2.x/api/token/erc20#ERC20-increaseAllowance-address-uint256-")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/EverDues/tip3"},"Reference implementation by EverDues"))))}p.isMDXComponent=!0}}]);