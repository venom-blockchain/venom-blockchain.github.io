"use strict";(self.webpackChunkve_ps=self.webpackChunkve_ps||[]).push([[6548],{4137:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=r,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||a;return t?o.createElement(g,i(i({ref:n},u),{},{components:t})):o.createElement(g,i({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5506:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=t(7462),r=(t(7294),t(4137));const a={sidebar_position:3,sidebar_label:"Ways of code enhancing"},i="Venom In Action. Ways of code enhancing",l={unversionedId:"build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/ways-of-code-enhancing",id:"build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/ways-of-code-enhancing",title:"Venom In Action. Ways of code enhancing",description:"Let's go over some best practice points, that will helps us to enhance a code we have. As you remember we have some tvm.rawReserve calls, like",source:"@site/docs/build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/ways-of-code-enhancing.md",sourceDirName:"build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action",slug:"/build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/ways-of-code-enhancing",permalink:"/build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/ways-of-code-enhancing",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Ways of code enhancing"},sidebar:"buildSidebar",previous:{title:"Going Global",permalink:"/build/development-guides/how-to-create-your-own-fungible-tip-3-token/venom-in-action/going-global"},next:{title:"Voting system basics",permalink:"/build/development-guides/developing-of-simple-voting-system/voting-system-basics"}},s={},c=[],u={toc:c};function p(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"venom-in-action-ways-of-code-enhancing"},"Venom In Action. Ways of code enhancing"),(0,r.kt)("p",null,"Let's go over some best practice points, that will helps us to enhance a code we have. As you remember we have some ",(0,r.kt)("inlineCode",{parentName:"p"},"tvm.rawReserve")," calls, like"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"tvm.rawReserve(1 ever, 0);\n")),(0,r.kt)("p",null,"Moving these gas constants to a standalone library is a good form. Same for external calling:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"ITokenRoot(distributedTokenRoot).deployWallet {\n    value: 0.2 ever,\n    flag: 1,\n    callback: Tokensale.onTokenWallet\n}\n(\n    address(this),\n    0.1 ever\n);\n")),(0,r.kt)("p",null,"Just create some library:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity",metastring:'title="TokensaleGas.sol" lineNumbers="true"',title:'"TokensaleGas.sol"',lineNumbers:'"true"'},"pragma ever-solidity >= 0.61.2;\n\nlibrary TokensaleGas {\n    uint128 constant INITIAL_BALANCE                                  = 0.7  ever;\n    uint128 constant DEPLOY_EMPTY_WALLET_VALUE                        = 0.2  ever;\n}\n")),(0,r.kt)("p",null,"So that allows you to easily change gas variables for your contract"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity",metastring:'title="Tokensale.sol" lineNumbers="true"',title:'"Tokensale.sol"',lineNumbers:'"true"'},'pragma ever-solidity >= 0.61.2;\n...\nimport "./gas/TokensaleGas.sol"\n\ncontract Tokensale {\n...\n        constructor(\n                address distributedTokenRoot,\n                uint256 supply,\n                uint128 rate,\n                address sendRemainingGasTo\n            ) public {\n                tvm.accept();\n                tvm.rawReserve(TokesaleGas.INITIAL_BALANCE, 0);\n...\n                ITokenRoot(distributedTokenRoot).deployWallet {\n                    value: TokesaleGas.DEPLOY_EMPTY_WALLET_VALUE,\n                    flag: 1,\n                    callback: Tokensale.onTokenWallet\n                } (\n                    address(this),\n                    0.1 ever // create a constant for this variable too :)\n                );\n')),(0,r.kt)("p",null,"You can accept the same idea for error codes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity",metastring:'title="TokensaleErrors.sol" lineNumbers="true"',title:'"TokensaleErrors.sol"',lineNumbers:'"true"'},"pragma ever-solidity >= 0.61.2;\n\nlibrary TokensaleErrors {\n    uint8 constant BAD_ROOT_CALL               = 101;\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity",metastring:'title="Tokensale.sol" lineNumbers="true"',title:'"Tokensale.sol"',lineNumbers:'"true"'},'pragma ever-solidity >= 0.61.2;\n...\n\nimport "./errors/TokensaleErrors.sol"\n\n...\n\n    function onTokenWallet(address value) external {\n        require (\n            msg.sender.value != 0 &&\n            msg.sender == _distributedTokenRoot,\n            TokensaleErrors.BAD_ROOT_CALL\n        );\n\n...\n')))}p.isMDXComponent=!0}}]);