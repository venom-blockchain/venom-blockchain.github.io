<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-standards/VEP/vep-33">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">VEP-33: Allowance Token Interface | Venom Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://venom.foundation/standards/VEP/vep-33"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="VEP-33: Allowance Token Interface | Venom Docs"><meta data-rh="true" name="description" content="Abstract"><meta data-rh="true" property="og:description" content="Abstract"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://venom.foundation/standards/VEP/vep-33"><link data-rh="true" rel="alternate" href="https://venom.foundation/standards/VEP/vep-33" hreflang="en"><link data-rh="true" rel="alternate" href="https://venom.foundation/standards/VEP/vep-33" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-89NZVH357M"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-89NZVH357M",{anonymize_ip:!0})</script>




<link rel="preconnect" href="https://www.googletagmanager.com">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-MQRC9JG",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Venom Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.aa0e13d6.css">
<link rel="preload" href="/assets/js/runtime~main.d97c74c3.js" as="script">
<link rel="preload" href="/assets/js/main.27c4d2da.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MQRC9JG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Venom</b></a><a class="navbar__item navbar__link" href="/general/readme">Docs</a><a class="navbar__item navbar__link" href="/build/quick-start-on-testnet">Build</a><a class="navbar__item navbar__link" href="/faq/">FAQ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/standards/VEP/">Standards</a></div><div class="navbar__items navbar__items--right"><a href="https://forum.venom.foundation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/venom-blockchain/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/standards/VEP/">Venom Enhance Proposals</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/standards/VEP/vep-1">VEP-1: VEP Purpose and Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/standards/VEP/vep-1111">VEP-1111: Contract indexation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/standards/VEP/vep-1155">VEP-1155: Multi-Token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/standards/VEP/vep-2981">VEP-2981: NFT Royalty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/standards/VEP/vep-33">VEP-33: Allowance Token Interface</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/standards/LICENSE">LICENSE</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Borrowed TIPs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/standards/TIP/TIP-3/core-description">Fungible Token</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/standards/TIP/TIP-4/core-description">Non-Fungible Token</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/standards/TIP/TIP-6/core-description">Standard Interface Detection</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/standards/VEP/"><span itemprop="name">Venom Enhance Proposals</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">VEP-33: Allowance Token Interface</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>VEP-33: Allowance Token Interface</h1></header><div class="language-preamble codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-preamble codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VEP: 33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">author: EverDues &lt;contact@everdues.com&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: Review</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type: Contract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">created: 16.05.2023</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requires: TIP-3, TIP-3.1, TIP-3.2, TIP-6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>VEP-33 describes an Allowance Token Interface by which token owners can allow a spender contract to spend a certain amount of tokens on their behalf to add support of pull payments (e.g. subscriptions, regular payouts, instalments, costs averaging etc).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2><p>The present cryptocurrency payment infrastructure primarily depends on push transactions. In such a system, the payer initiates the payment and sends (&#x27;pushes&#x27;) the funds to the payee&#x27;s wallet address. While this system has proven effective for cryptocurrencies up to now, it also poses several challenges that impede mainstream adoption and restrict the versatility of cryptocurrencies across various commercial contexts. This proposal aspires to introduce the Allowance Token Interface as a solution to these challenges.</p><p>Subscription-based business models have witnessed exponential growth across numerous industries, such as media streaming, Software as a Service (SaaS), gaming, and more. Users are usually charged on a regular basis - monthly, quarterly, or annually. The existing push payment systems in the crypto landscape make recurring payments a cumbersome and complex process. This is because a new transaction needs to be manually initiated every time a payment is due, significantly reducing the feasibility of subscription-based models.</p><p>Consider the experience of a user named Alice, who maintains several subscriptions for streaming services, software, and online magazines, all payable in cryptocurrency. With the current push system, Alice would need to remember each due date and manually process each payment. The inconvenience and potential for missed payments could deter Alice and others like her from using cryptocurrencies for these transactions.</p><p>By incorporating this interface into the token, TIP3 token issuers can significantly boost user adoption and expand the practical applications for tokens in real-world scenarios, such as:</p><ul><li>Subscription Services</li><li>Investments and Savings</li><li>Rent</li><li>Membership Fees</li><li>Donations</li><li>Online Learning and E-Courses</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="specification">Specification<a href="#specification" class="hash-link" aria-label="Direct link to Specification" title="Direct link to Specification">​</a></h2><p>The keywords “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="https://datatracker.ietf.org/doc/html/rfc2119" target="_blank" rel="noopener noreferrer">RFC 2119</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-root-contract"><a href="https://docs.venom.foundation/standards/TIP/TIP-3/1#token-root" target="_blank" rel="noopener noreferrer">Token root contract</a><a href="#token-root-contract" class="hash-link" aria-label="Direct link to token-root-contract" title="Direct link to token-root-contract">​</a></h3><p>No changes REQUIRED in existing standard TIP-3.2.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-wallet-contract"><a href="https://docs.venom.foundation/standards/TIP/TIP-3/1#token-wallet" target="_blank" rel="noopener noreferrer">Token wallet contract</a><a href="#token-wallet-contract" class="hash-link" aria-label="Direct link to token-wallet-contract" title="Direct link to token-wallet-contract">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="increaseallowance">increaseAllowance<a href="#increaseallowance" class="hash-link" aria-label="Direct link to increaseAllowance" title="Direct link to increaseAllowance">​</a></h4><p>Allows the spender contract to withdraw from your wallet multiple times, up to the <code>amount</code>. If this function is called again for the same <code>spender</code> it increases the current allowance with the <code>amount</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function increasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param amount allowance amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param notify notify waller owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function increaseAllowance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note:</strong> Multi-allowance MUST be possible by executing increaseAllowance for each spender address.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="decreaseallowance">decreaseAllowance<a href="#decreaseallowance" class="hash-link" aria-label="Direct link to decreaseAllowance" title="Direct link to decreaseAllowance">​</a></h4><p>Decreases the current allowance with the <code>amount</code>. If the current <code>spender</code> allowance does not exist, do nothing. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function is decreasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param amount allowance amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function decreaseAllowance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong>: </p><ol><li>If the <code>amount</code> is <code>&gt;=</code> that existing allowance then deletes the current allowance.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="allowance">allowance<a href="#allowance" class="hash-link" aria-label="Direct link to allowance" title="Direct link to allowance">​</a></h4><p>Returns the amount which spender is still allowed to withdraw from the wallet.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function return current spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @return amount initial and maximum allowance granted to spender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function allowance(address spender) external view returns (uint128 amount);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="transferfrom">transferFrom<a href="#transferfrom" class="hash-link" aria-label="Direct link to transferFrom" title="Direct link to transferFrom">​</a></h4><p>The <code>transferFrom</code> method is used for a withdrawal workflow, allowing <code>spender</code> contracts to transfer tokens on your behalf to a token wallet, owned by the <code>spender</code>. Token wallet address is derived automatically.</p><p>The function MUST throw an error unless the message sender has permission to withdraw such an amount of tokens granted via the <code>approve</code> function. The function MUST decrease the allowed number of tokens by the <code>amount</code> and call the <code>acceptTransfer</code> function of the <code>recipientWallet</code> with the <code>amount</code> as an argument and decrease the token wallet balance by <code>amount</code>. The function MUST throw an error, if the current <code>balance</code> of tokens is less than the <code>amount</code>. </p><p>If <code>deployWalletValue</code> is greater than <code>0</code>, token wallet MUST deploy token wallet for recipient.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function is transfered tokens to a spender wallet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param deployWalletValue value to deploy the recipient&#x27;s wallet if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function transferFrom(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 deployWalletValue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remainingGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="callbacks">Callbacks<a href="#callbacks" class="hash-link" aria-label="Direct link to Callbacks" title="Direct link to Callbacks">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="incoming-approval-callback">Incoming approval callback<a href="#incoming-approval-callback" class="hash-link" aria-label="Direct link to Incoming approval callback" title="Direct link to Incoming approval callback">​</a></h4><p>Notifies spender contract that an allowance was changed.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function notify spender contract about allowance changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param tokenRoot token root address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param recoveryRate recovery rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param sender sender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function onAcceptTokensAllowance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          address tokenRoot,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          uint128 recoveryRate,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          address sender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          address remainingGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extended-interface">Extended interface<a href="#extended-interface" class="hash-link" aria-label="Direct link to Extended interface" title="Direct link to Extended interface">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disapprove">disapprove<a href="#disapprove" class="hash-link" aria-label="Direct link to disapprove" title="Direct link to disapprove">​</a></h4><p>Cancel current spender allowance. Can be used as an alternative to <code>decreaseAllowance</code> to cancel allowance without need to know the amount of the current allowance. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function cancel spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function disapprove(address spender) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="increaseallowancerenewable">increaseAllowanceRenewable<a href="#increaseallowancerenewable" class="hash-link" aria-label="Direct link to increaseAllowanceRenewable" title="Direct link to increaseAllowanceRenewable">​</a></h4><p>An auto-renewable allowance enables many traditional financial concepts like credit and debit limits. A wallet owner can specify a spending limit, and limit the amount that can be charged from the wallet based on an allowance that recovers over time at a rate of recoveryRate up to a limit of amount. recoveryRate defines the amount of tokens per second that the allowance regains towards the initial maximum approval amount. If this function is called again for the same spender it increases the current allowance with the amount or current recovery rate according to the new recoveryRate.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function increasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param recoveryRate recovery rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param notify notify waller owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function increaseAllowanceRenewable(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 recoveryRate,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong>: </p><ol><li>Renewable allowances can be implemented with discrete resets per time cycle. However, a continuous <code>recoveryRate</code> allows for more flexible use cases not bound by reset cycles and can be implemented with simpler logic.</li><li>Current recovered allowance (from the last execution of <code>tranferFrom</code> function) MUST be recalculated according new <code>amount</code> and/or <code>recoveryRate</code>.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="decreaseallowancerenewable">decreaseAllowanceRenewable<a href="#decreaseallowancerenewable" class="hash-link" aria-label="Direct link to decreaseAllowanceRenewable" title="Direct link to decreaseAllowanceRenewable">​</a></h4><p>Decreases the current allowance with the <code>amount</code> and/or current recovery rate with <code>recoveryRate</code>. If the current <code>spender</code> allowance does not exist, do nothing. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice This function is decreasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param amount allowance amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param recoveryRate recovery rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function decreaseAllowanceRenewable(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 recoveryRate,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) external;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong>: </p><ol><li>If the <code>amount</code> is <code>&gt;=</code>that existing allowance then deletes the current allowance.</li><li>Current recovered allowance (from the last execution of <code>tranferFrom</code> function) MUST be recalculated according new <code>amount</code> and/or <code>recoveryRate</code>.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="allowancerenewable">allowanceRenewable<a href="#allowancerenewable" class="hash-link" aria-label="Direct link to allowanceRenewable" title="Direct link to allowanceRenewable">​</a></h4><p>Returns approved max amount and recovery rate of allowance granted to spender. The amount returned by allowance method MUST be as of <code>block.timestamp</code>, if a renewable allowance for <code>spender</code> is present.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// @notice  Returns approved max amount and recovery rate of allowance granted to `spender` </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @param   spender allowed spender of token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @return  amount initial and maximum allowance granted to spender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// @return  recoveryRate recovery amount per second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function allowanceRenewable() external view returns (uint128 amount, uint128 recoveryRate);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="increaseallowance-decreaseallowance">increaseAllowance, decreaseAllowance<a href="#increaseallowance-decreaseallowance" class="hash-link" aria-label="Direct link to increaseAllowance, decreaseAllowance" title="Direct link to increaseAllowance, decreaseAllowance">​</a></h4><p>Base methods <code>increaseAllowance</code> and <code>decreaseAllowance</code> MUST set recoveryRate to <code>0</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface-detection">Interface detection<a href="#interface-detection" class="hash-link" aria-label="Direct link to Interface detection" title="Direct link to Interface detection">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="allowance-1">Allowance<a href="#allowance-1" class="hash-link" aria-label="Direct link to Allowance" title="Direct link to Allowance">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface IAllowanceTokenWallet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function increasing `spender` allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify waller owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function increaseAllowance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function is decreasing `spender` allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount allowance amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function decreaseAllowance(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice Returns amounts spendable by `spender`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param spender spender of token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @return remaining allowance at the current point in time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function allowance(address sender) external returns (uint128 amount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function is transfered tokens to a spender wallet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param deployWalletValue value to deploy the spender&#x27;s wallet if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function transferFrom(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 deployWalletValue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remainingGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The token wallet interface ID is <code>0x2FC61B07</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="renewable-allowance">Renewable Allowance<a href="#renewable-allowance" class="hash-link" aria-label="Direct link to Renewable Allowance" title="Direct link to Renewable Allowance">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interface IAllowanceRenewableTokenWallet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function increasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify waller owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function increaseAllowanceRenewable(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 recoveryRate,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function is decreasing spender allowance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param spender spender address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount allowance amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param recoveryRate recovery rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param remaningGasTo remaining gas address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function decreaseAllowanceRenewable(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address spender,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 recoveryRate,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remaningGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice  Returns approved max amount and recovery rate of allowance granted to `spender` </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param   spender allowed spender of token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @return  amount initial and maximum allowance granted to spender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @return  recoveryRate recovery amount per second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function allowanceRenewable(address sender) external returns (uint128 amount, uint128 recoveryRate);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice This function is transfered tokens to a spender wallet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param amount tokens amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param deployWalletValue value to deploy the recipient&#x27;s wallet if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param notify notify wallet owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @param payload transaction payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function transferFrom(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint128 deployWalletValue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address remainingGasTo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool notify,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TvmCell payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ) external;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The token wallet interface ID is <code>0x7EB81C0D</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rationale">Rationale<a href="#rationale" class="hash-link" aria-label="Direct link to Rationale" title="Direct link to Rationale">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-renewable-allowance">Auto-renewable allowance<a href="#auto-renewable-allowance" class="hash-link" aria-label="Direct link to Auto-renewable allowance" title="Direct link to Auto-renewable allowance">​</a></h3><p>In the most EVM networks ERC-20 tokens support allowances, with which token owners can allow a spender to spend a certain amount of tokens on their behalf. However, this is not ideal in circumstances involving recurring payments (e.g. subscriptions, regular payouts, instalments, costs averaging etc).
Many existing DApps in EVM networks circumvent this limitation by requesting that users grant a large or unlimited allowance. This presents a security risk as malicious DApps can drain users’ accounts up to the allowance granted, and users may not be aware of the implications of granting allowances.
An auto-renewable allowance is used to mitigate such risks by providing possibility to limit the amount charged from the token wallet based on an allowance that recovers over time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="increaseallowancedecreaseallowance">increaseAllowance/decreaseAllowance<a href="#increaseallowancedecreaseallowance" class="hash-link" aria-label="Direct link to increaseAllowance/decreaseAllowance" title="Direct link to increaseAllowance/decreaseAllowance">​</a></h3><p>In ERC-20 token standard allowance is implemented with help of <code>approve</code> method but changing an allowance with this method brings the risk that someone may use both the old and the new allowance by unfortunate transaction ordering. To mitigate such risks we excluded this function from standard and proposed to use <code>increaseAllowance</code> and <code>decreaseAllowance</code> instead. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility">Backwards compatibility<a href="#backwards-compatibility" class="hash-link" aria-label="Direct link to Backwards compatibility" title="Direct link to Backwards compatibility">​</a></h2><p>This standard is compatible with <!-- -->[TIP-3.1]<!-- -->, <!-- -->[TIP-3.2]<!-- --> standards.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security considerations" title="Direct link to Security considerations">​</a></h2><p>There are no security considerations related directly to the implementation of this standard.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="copyright">Copyright<a href="#copyright" class="hash-link" aria-label="Direct link to Copyright" title="Direct link to Copyright">​</a></h2><p>Copyright and related rights waived via <a href="https://docs.venom.foundation/standards/LICENSE/" target="_blank" rel="noopener noreferrer">CC0</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><ul><li><a href="https://eips.ethereum.org/EIPS/eip-20" target="_blank" rel="noopener noreferrer">https://eips.ethereum.org/EIPS/eip-20</a></li><li><a href="https://eips.ethereum.org/EIPS/eip-5827" target="_blank" rel="noopener noreferrer">https://eips.ethereum.org/EIPS/eip-5827</a></li><li><a href="https://docs.openzeppelin.com/contracts/2.x/api/token/erc20#ERC20-increaseAllowance-address-uint256-" target="_blank" rel="noopener noreferrer">https://docs.openzeppelin.com/contracts/2.x/api/token/erc20#ERC20-increaseAllowance-address-uint256-</a></li><li><a href="https://github.com/EverDues/tip3" target="_blank" rel="noopener noreferrer">Reference implementation by EverDues</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/standards/VEP/vep-2981"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">VEP-2981: NFT Royalty</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/standards/LICENSE"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">LICENSE</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#specification" class="table-of-contents__link toc-highlight">Specification</a><ul><li><a href="#token-root-contract" class="table-of-contents__link toc-highlight">Token root contract</a></li><li><a href="#token-wallet-contract" class="table-of-contents__link toc-highlight">Token wallet contract</a></li><li><a href="#callbacks" class="table-of-contents__link toc-highlight">Callbacks</a></li><li><a href="#extended-interface" class="table-of-contents__link toc-highlight">Extended interface</a></li><li><a href="#interface-detection" class="table-of-contents__link toc-highlight">Interface detection</a></li></ul></li><li><a href="#rationale" class="table-of-contents__link toc-highlight">Rationale</a><ul><li><a href="#auto-renewable-allowance" class="table-of-contents__link toc-highlight">Auto-renewable allowance</a></li><li><a href="#increaseallowancedecreaseallowance" class="table-of-contents__link toc-highlight">increaseAllowance/decreaseAllowance</a></li></ul></li><li><a href="#backwards-compatibility" class="table-of-contents__link toc-highlight">Backwards compatibility</a></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security considerations</a></li><li><a href="#copyright" class="table-of-contents__link toc-highlight">Copyright</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/general/readme">General</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/glossary">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/build/quick-start-on-testnet">Build</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/maintain/network-maintainers">Maintain</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forum.venom.foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/venomblockchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/QsVypuKbZj" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/venomfoundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/@venom.foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/venom-blockchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Venom Foundation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d97c74c3.js"></script>
<script src="/assets/js/main.27c4d2da.js"></script>
</body>
</html>